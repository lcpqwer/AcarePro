(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-Login_one-Login_one"],{4112:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,e("7f7f");var n={data:function(){return{companyName:"",companyList:[],companyID:0,height:"",a:""}},onLoad:function(t){var o=this;if(t.data&&JSON.parse(t.data).openid){o.a=JSON.parse(t.data).openid,getApp().globalData.openid=JSON.parse(t.data).openid;var e=getApp().globalData.AllUrl+"auth/wechat/login";uni.request({url:e,method:"POST",data:{wid:getApp().globalData.openid},success:function(t){console.log(t),-1==t.data?uni.showToast({title:"授权成功请绑定账号",icon:"none",duration:1e3,mask:!0,success:function(){setTimeout(function(){uni.hideToast()},1e3)}}):(getApp().globalData.loginToken="JWT "+t.data.data.token,uni.setStorage({key:"loginToken",data:"JWT "+t.data.data.token,success:function(){o.toHome()}}))},fail:function(){},complete:function(){}})}else uni.showLoading({title:"",mask:!0}),o.height="height: "+(document.body.scrollHeight-40)+"px",uni.getStorage({key:"loginToken",success:function(t){console.log(2);var e=t.data;uni.request({url:getApp().globalData.AllUrl+"user",method:"GET",data:{},header:{Authorization:e},success:function(t){console.log(t),getApp().globalData.loginToken=e,"Token已更改，请重新登录获取"==t.data.msg?o.Prompt("登陆异常，请重新登录"):"请传递正确的验证头信息"==t.data.msg?o.Prompt("登陆异常，请重新登录"):t.data.data.inc_state?o.toHome():uni.navigateTo({url:"/pages/Perfect_user/Perfect_user"})},fail:function(){console.log("获取失败")},complete:function(){}})}});o.getcompany(),o.getLocation()},methods:{getLocation:function(){uni.getLocation({type:"wgs84",success:function(t){console.log(t),getApp().globalData.latitude=t.latitude,getApp().globalData.longitude=t.longitude,uni.request({url:"https://restapi.amap.com/v3/geocode/regeo",method:"GET",data:{key:"3dcb6b8d3b392e810c3de2b24de278bd",location:getApp().globalData.longitude+","+getApp().globalData.latitude,extensions:"all",s:"rsx",sdkversion:"sdkversion",logversion:"logversion"},success:function(t){console.log(t);var o=t.data.regeocode.addressComponent;"string"!=typeof o.city&&(o.city=o.province),getApp().globalData.province=o.province,getApp().globalData.city=o.city,getApp().globalData.area=o.district},fail:function(){console.log("error")},complete:function(){}})}})},chooseCompany:function(t){this.companyName=this.companyList[t.detail.value].name,this.companyID=this.companyList[t.detail.value].id},toLogin:function(){""==this.companyName?this.Prompt("请选择保险公司！"):(getApp().globalData.company=this.companyID,console.log(this.companyID),3==this.companyID?uni.navigateTo({url:"/pages/Login_two/Login_two"}):4==this.companyID?uni.navigateTo({url:"/pages/Login_three/Login_three"}):uni.navigateTo({url:"/pages/Login/Login"}))},Prompt:function(t){uni.showToast({title:t,icon:"none"})},getcompany:function(){var t=this;uni.request({url:getApp().globalData.AllUrl+"api/company",method:"GET",data:{},success:function(o){console.log(o),t.companyList=o.data,uni.hideLoading()},fail:function(){t.Prompt("网络出错！")},complete:function(){}})},toHome:function(){uni.navigateTo({url:"/pages/home/home"})}}};o.default=n},"5a8c":function(t,o,e){"use strict";e.r(o);var n=e("4112"),a=e.n(n);for(var i in n)"default"!==i&&function(t){e.d(o,t,function(){return n[t]})}(i);o["default"]=a.a},"8f7b":function(t,o,e){"use strict";var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("v-uni-view",{staticClass:"posir",staticStyle:{height:"100%"}},[e("v-uni-view",{staticClass:"Logo"},[e("v-uni-image",{staticStyle:{width:"500upx",height:"160upx",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},attrs:{src:"/static/img/logo1018.png",mode:""}})],1),e("v-uni-picker",{staticStyle:{"z-index":"100"},attrs:{mode:"selector",range:t.companyList,"range-key":"name"},on:{change:function(o){o=t.$handleEvent(o),t.chooseCompany(o)}}},[e("v-uni-input",{staticClass:"companyName",staticStyle:{"z-index":"100"},attrs:{type:"text",disabled:"true",value:t.companyName,placeholder:"点击选择你所属的保险公司"}})],1),e("v-uni-button",{staticClass:"Sub",staticStyle:{"z-index":"100","background-color":"#fff",color:"#1357c7","box-shadow":"5upx 5upx 5upx #888888"},attrs:{type:"primary"},on:{click:function(o){o=t.$handleEvent(o),t.toLogin()}}},[t._v("登 录")]),e("v-uni-image",{staticStyle:{position:"absolute",bottom:"0",right:"0","z-index":"1"},attrs:{src:"/static/img/bgi.jpg",mode:""}}),e("v-uni-image",{staticStyle:{width:"100%",height:"25upx",position:"absolute",bottom:"0","z-index":"10"},attrs:{src:"/static/img/bottom.png",mode:""}})],1)},a=[];e.d(o,"a",function(){return n}),e.d(o,"b",function(){return a})},a79b:function(t,o,e){var n=e("c47b");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f06").default;a("3bba6181",n,!0,{sourceMap:!1,shadowMode:!1})},c47b:function(t,o,e){o=t.exports=e("2350")(!1),o.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.companyName[data-v-c6a1e5d4]{width:%?650?%;height:%?80?%;text-align:center;border:%?2?% solid silver;border-radius:%?10?%;margin-left:%?50?%}.Logo[data-v-c6a1e5d4]{width:100%;height:%?400?%;text-align:center;line-height:%?255?%;position:relative}.Sub[data-v-c6a1e5d4]{width:60%;height:%?85?%;line-height:%?85?%;font-size:%?35?%;margin-top:%?125?%;background-color:#118acd}',""])},ceac:function(t,o,e){"use strict";e.r(o);var n=e("8f7b"),a=e("5a8c");for(var i in a)"default"!==i&&function(t){e.d(o,t,function(){return a[t]})}(i);e("f3f7");var s=e("2877"),c=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"c6a1e5d4",null);o["default"]=c.exports},f3f7:function(t,o,e){"use strict";var n=e("a79b"),a=e.n(n);a.a}}]);